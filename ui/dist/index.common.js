/*!
 * quasar-ui-tyformviewer v0.1.78
 * (c) 2022 dan@typefully.io
 * Released under the MIT License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var vue=require("vue"),quasar=require("quasar"),script$b={name:"Block",components:{TyText:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TyPassword:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TyTextarea:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TyEmail:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TySearch:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TyTel:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TyNumber:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TyUrl:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyInput})),TySelect:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TySelect})),TySlider:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TySlider})),TyRating:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyRating})),TyCheckbox:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyOptionGroup})),TyRadio:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyOptionGroup})),TyToggle:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyOptionGroup})),TyHtml:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyHtml})),TyTitle:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyTitle})),TyDate:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TyDate})),TySignature:vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return TySignature}))},props:{blockSchema:Object,modelValue:[String,Boolean,Number,Array,Object]},emits:["update:modelValue"],setup(e,{emit:t}){var a=vue.ref(null),o=vue.ref(!1);const r=vue.reactive(e.blockSchema);e=vue.ref(e.modelValue);return{el:a,hover:o,behavior:vue.computed(()=>({readOnly:"on"===r.behavior.readOnly,required:"on"===r.behavior.required,clearable:"on"===r.behavior.clearable,disabled:"on"===r.behavior.disabled,displayed:"on"===r.behavior.displayed,counter:"on"===r.behavior.counter,multiple:!!r.behavior.multiple})),schema:r,modelValueRef:e,onUpdate:e=>{t("update:modelValue",e)}}}};function render$a(e,t,a,o,r,n){return o.behavior.displayed?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"ty-block q-mt-lg",style:{position:"relative"},ref:"el",onMouseover:t[1]||(t[1]=e=>o.hover=!0),onMouseleave:t[2]||(t[2]=e=>o.hover=!1)},[vue.renderSlot(e.$slots,"beforeblock",{blockSchema:o.schema,el:o.el,hover:o.hover}),(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent("ty-"+o.schema.type),vue.mergeProps(o.schema,{behavior:o.behavior,class:"q-my-md",modelValue:o.modelValueRef,"onUpdate:modelValue":[t[0]||(t[0]=e=>o.modelValueRef=e),o.onUpdate]}),null,16,["behavior","modelValue","onUpdate:modelValue"]))],544)):vue.createCommentVNode("",!0)}script$b.render=render$a;var script$a=vue.defineComponent({name:"TyFormViewer",components:{Block:script$b,QForm:quasar.QForm,QCard:quasar.QCard,QImg:quasar.QImg,QCardSection:quasar.QCardSection},props:{formSchema:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},embedded:Boolean,mobileView:Boolean,demo:Boolean},setup(o){const r=quasar.useQuasar(),n=vue.reactive(o.formData);var e=vue.ref(null);const i=vue.ref(0),l=vue.ref(null),s=vue.ref(!1),u=vue.computed(()=>o.formSchema);vue.ref(null),vue.watch(()=>u,()=>{u.value.pages.forEach(e=>{e.blocks.forEach(e=>{void 0===n[e.name]&&(n[e.name]=null)})})},{immediate:!0,deep:!0}),vue.provide("formSchema",u);const t=vue.computed(()=>r.platform.is.mobile||o.mobileView);var a=vue.computed(()=>{const e={};return"left"===u.value.theme.card.position?e.justifyContent="flex-start":"right"===u.value.theme.card.position?e.justifyContent="flex-end":e.justifyContent="center",e}),d=vue.computed(()=>{if("gradient"===u.value.theme.page.backgroundType){var e=u.value.theme.page.backgroundGradient;return"linear"===e.type?{backgroundImage:`linear-gradient(${e.direction}deg, ${e.color1} ${e.position1}%, ${e.color2} ${e.position2}%)`}:{backgroundImage:`radial-gradient(circle at center, ${e.color1} ${e.position1}%, ${e.color2} ${e.position2}%)`}}e={backgroundColor:u.value.theme.page.backgroundColor||"#fff"};return"image"===u.value.theme.page.backgroundType&&Object.assign(e,{backgroundImage:u.value.theme.page.backgroundImage?`url("${u.value.theme.page.backgroundImage}")`:null,backgroundSize:"cover"}),e});const c=vue.computed(()=>("left"===u.value.theme.card.cover.position||"right"===u.value.theme.card.cover.position)&&l.value&&l.value.clientWidth>=(u.value.theme.card.revertToVerticalIfWidthBelow||600));var m=vue.computed(()=>u.value.theme.card.cover.position&&"none"!==u.value.theme.card.cover.position);const h=vue.computed(()=>t.value?0:u.value.theme.card.cornersRadius);var v=vue.computed(()=>({backgroundColor:u.value.theme.card.backgroundColor||"#fff",backdropFilter:u.value.theme.card.backdrop,width:"100%",maxWidth:u.value.theme.card.maxWidth+"px",maxHeight:c.value&&u.value.theme.card.maxHeight?u.value.theme.card.maxHeight+"px":void 0,borderRadius:h.value+"px",border:u.value.theme.card.border?`${u.value.theme.card.border.width}px solid ${u.value.theme.card.border.color}`:0,overflow:"hidden",alignSelf:"center"})),p=vue.computed(()=>{const e=[];return 0===u.value.theme.card.shadow?e.push("no-shadow"):e.push("shadow-"+u.value.theme.card.shadow),o.embedded||t||e.push("q-my-lg"),c.value||e.push("q-pb-md"),e}),f=vue.computed(()=>{const e=[];return o.embedded?e.push("min-height-100p"):e.push("full-height-100vh"),t.value?e.push("q-py-none"):c.value&&e.push("flex-center"),e}),g=vue.computed(()=>{const e=[];return c.value&&u.value.theme.card.cover.widthCols&&e.push("col-"+u.value.theme.card.cover.widthCols),e}),y=vue.computed(()=>{const e=[];return c.value&&(e.push("row"),"right"===u.value.theme.card.cover.position&&e.push("reverse")),e}),b=vue.computed(()=>{const e=[];return u.value.theme.card.cover.widthCols&&e.push("col-"+(12-u.value.theme.card.cover.widthCols)),e}),_=vue.computed(()=>{var e=u.value.theme.card.border?u.value.theme.card.border.width:0,t=c.value&&u.value.theme.card.maxHeight?u.value.theme.card.maxHeight:9999,a=l.value?l.value.clientHeight:9999,o=c.value?9999:u.value.theme.card.cover.maxHeight||180,o=Math.min(t,a,o)-e*(c.value?2:1),e=c.value&&u.value.theme.card.minHeight?u.value.theme.card.minHeight:0;return Math.max(e,o)+"px"}),S=vue.computed(()=>{const e={};return c.value&&!u.value.theme.card.cover.widthCols&&u.value.theme.card.width&&(e.width=u.value.theme.card.cover.width+"px"),0<h.value&&(e.borderRadius="0"),e}),k=vue.computed(()=>({borderRadius:u.value.theme.buttons.cornersRadius+"px",backgroundColor:u.value.theme.buttons.backgroundColor,border:u.value.theme.buttons.border?`${u.value.theme.buttons.border.width}px solid ${u.value.theme.buttons.border.color}`:void 0}));const x=vue.computed(()=>u.value.theme.inputs.activeColor||"#1976d2");vue.watch(()=>[x.value,l.value],([e])=>{l.value&&quasar.setCssVar("primary",e,l.value)},{immediate:!0});return{mobile:t,wrapperStyle:a,pageStyle:d,cardStyle:v,cardClasses:p,tabPanelClasses:f,openTypefully:()=>quasar.openURL("https://typefully.io"),currentPage:i,reactiveFormSchema:u,mainPage:l,horizontal:c,showCover:m,coverClasses:g,formClasses:b,coverStyle:S,coverHeight:_,coverWrapperClasses:y,buttonStyle:k,buttonLoading:s,buttonClicked:async()=>{if(u.value.pages.length-1>i.value)i.value+=1;else{if(s.value=!0,o.demo)t=1e3,await new Promise(e=>setTimeout(e,t));else{const a=await fetch(u.value.form.actionUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),mode:"cors"});var e=await a.json();console.log("response",e)}s.value=!1;e=o.demo?"This is a preview. Form was not really submitted. But it was successful":"The form has been submitted successfully";r.notify({progress:!0,type:"positive",position:"center",multiLine:!0,icon:"thumb_up",message:e})}var t},formComp:e,reactiveFormData:n,onUpdate:(e,t)=>{console.log(`${e} = ${t} [${typeof t}] | ${JSON.stringify(t)}`)}}}});const _hoisted_1$9={class:"ty-main-page fit relative-position absolute",ref:"mainPage",style:{"z-index":"5",bottom:"0",top:"0",right:"0",left:"0"}},_hoisted_2$4={key:0,class:"absolute-bottom q-pa-sm text-white",style:{"background-color":"#00000088"}},_hoisted_3$1={key:0,class:"text-h6"},_hoisted_4$1={key:1,class:"text-subtitle2"},_hoisted_5$1={key:1,class:"q-pa-md"},_hoisted_6={key:0,class:"text-h6"},_hoisted_7={key:1,class:"text-subtitle2"},_hoisted_8={key:0,class:"q-py-lg row"};function render$9(o,a,e,t,r,n){const i=vue.resolveComponent("q-img"),l=vue.resolveComponent("block"),s=vue.resolveComponent("q-btn"),u=vue.resolveComponent("q-card-section"),d=vue.resolveComponent("q-card"),c=vue.resolveComponent("q-tab-panel"),m=vue.resolveComponent("q-tab-panels");var h=vue.resolveComponent("q-form");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent("style"),null,{default:vue.withCtx(()=>[vue.createTextVNode(" .q-field--outlined .q-field__control { border-radius: "+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.cornersRadius)+"px; } .q-field--outlined .q-field__control { background-color: rgba("+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.fill<0?"0,0,0":"255,255,255")+","+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.fill/100*(o.reactiveFormSchema.theme.inputs.fill<0?-1:1))+"); } .ty-signature canvas { border-radius: "+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.cornersRadius)+"px; border: 1px solid #c2c2c2; background-color: #fff; } "+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.textColor?`.ty-select .q-field__inner .q-field__native {
        color: ${o.reactiveFormSchema.theme.inputs.textColor};
      }`:"")+" .ty-label { font-size: "+vue.toDisplayString((100+o.reactiveFormSchema.theme.inputs.labelSize)/100)+"em; color: "+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.labelTextColor||"#000")+"; } .ty-select .q-field__inner .q-field__native { color: "+vue.toDisplayString(o.reactiveFormSchema.theme.inputs.textColor)+"; } .min-height-100p { min-height: 100%; } .full-height-100vh { min-height:100vh; } .ty-submit-btn { color: "+vue.toDisplayString(o.reactiveFormSchema.theme.buttons.textColor||"#000000")+" } .ty-back-btn { color: "+vue.toDisplayString(o.reactiveFormSchema.theme.buttons.backTextColor||"#000000")+" } .ty-rating .q-rating .q-rating__icon-container { margin-right: 10px } .ty-hint { font-size: 0.85rem } ",1)]),_:1})),vue.createElementVNode("div",{class:vue.normalizeClass({fullscreen:!o.embedded,fit:o.embedded}),style:vue.normalizeStyle([o.pageStyle,{"z-index":"1"}])},null,6),vue.createElementVNode("div",_hoisted_1$9,[vue.createVNode(h,{action:o.reactiveFormSchema.form.actionUrl,method:"post",ref:"formComp",class:"fit"},{default:vue.withCtx(()=>[vue.createVNode(m,{modelValue:o.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>o.currentPage=e),animated:"",swipeable:"",class:"bg-transparent fit"},{default:vue.withCtx(()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.reactiveFormSchema.pages,(e,t)=>(vue.openBlock(),vue.createBlock(c,{key:t,name:t,style:vue.normalizeStyle(o.wrapperStyle),class:vue.normalizeClass(["q-px-none bg-transparent fit flex",o.tabPanelClasses])},{default:vue.withCtx(()=>[vue.createVNode(d,{style:vue.normalizeStyle(o.cardStyle),class:vue.normalizeClass(o.cardClasses)},{default:vue.withCtx(()=>[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(o.horizontal?"q-card-section":"div"),{horizontal:o.horizontal,class:vue.normalizeClass(o.coverWrapperClasses)},{default:vue.withCtx(()=>[o.showCover&&e.cover&&e.cover.backgroundImage?(vue.openBlock(),vue.createBlock(i,{key:0,height:o.coverHeight,src:e.cover.backgroundImage,class:vue.normalizeClass(o.coverClasses),style:vue.normalizeStyle(o.coverStyle),fit:"cover"},{default:vue.withCtx(()=>[e.header||e.subHeader?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$4,[e.header?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$1,vue.toDisplayString(e.header),1)):vue.createCommentVNode("",!0),e.subHeader?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$1,vue.toDisplayString(e.subHeader),1)):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)]),_:2},1032,["height","src","class","style"])):vue.createCommentVNode("",!0),o.showCover||!e.header&&!e.subHeader?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$1,[e.header?(vue.openBlock(),vue.createElementBlock("div",_hoisted_6,vue.toDisplayString(e.header),1)):vue.createCommentVNode("",!0),e.subHeader?(vue.openBlock(),vue.createElementBlock("div",_hoisted_7,vue.toDisplayString(e.subHeader),1)):vue.createCommentVNode("",!0)])),vue.createVNode(u,{class:vue.normalizeClass([o.formClasses,"q-py-sm"])},{default:vue.withCtx(()=>[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(o.horizontal?"q-scroll-area":"div"),{class:vue.normalizeClass({"q-pr-md":o.horizontal}),style:{height:"100%"}},{default:vue.withCtx(()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.blocks,(t,e)=>(vue.openBlock(),vue.createBlock(l,{key:t.name||t.type+e,"block-schema":t,modelValue:o.reactiveFormData[t.name],"onUpdate:modelValue":[e=>o.reactiveFormData[t.name]=e,e=>o.onUpdate(t.name,e)]},{beforeblock:vue.withCtx(({blockSchema:e,el:t,hover:a})=>[vue.renderSlot(o.$slots,"beforeblock",{blockSchema:e,el:t,hover:a})]),_:2},1032,["block-schema","modelValue","onUpdate:modelValue"]))),128)),vue.createVNode(s,{label:e.buttonLabel,unelevated:"",class:vue.normalizeClass([`shadow-${o.reactiveFormSchema.theme.buttons.shadow} q-px-${["xs","sm","md","lg","xl"][o.reactiveFormSchema.theme.buttons.padding-1]}`,"ty-submit-btn"]),"no-caps":"",size:["sm","md","lg","xl"][o.reactiveFormSchema.theme.buttons.size-1],icon:e.buttonIcon,style:vue.normalizeStyle(o.buttonStyle),loading:o.buttonLoading,onClick:o.buttonClicked},null,8,["label","class","size","icon","style","loading","onClick"]),0<o.currentPage?(vue.openBlock(),vue.createBlock(s,{key:0,label:"Back",flat:"","no-caps":"",class:"q-ml-xl ty-back-btn",size:["sm","md","lg","xl"][o.reactiveFormSchema.theme.buttons.size-1],onClick:a[0]||(a[0]=e=>--o.currentPage)},null,8,["size"])):vue.createCommentVNode("",!0)]),_:2},1032,["class"]))]),_:2},1032,["class"])]),_:2},1032,["horizontal","class"]))]),_:2},1032,["style","class"]),o.embedded?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_8," "))]),_:2},1032,["name","style","class"]))),128))]),_:3},8,["modelValue"])]),_:3},8,["action"]),vue.renderSlot(o.$slots,"afterform")],512)],64)}script$a.render=render$9;var name="quasar-ui-tyformviewer",version$1="0.1.78",author="dan@typefully.io",description="Form Viewer generator based on JSON config for typefully.io",license="MIT",module$1="dist/index.esm.js",main="dist/index.common.js",scripts={deploy:"npm run build && npm version patch && npm publish && cd ../app-extension && npm version patch && npm publish",dev:"cd dev && npm run dev && cd ..","dev:umd":"npm run build && node build/script.open-umd.js","dev:ssr":"cd dev && npm run 'dev:ssr' && cd ..","dev:ios":"cd dev && npm run 'dev:ios' && cd ..","dev:android":"cd dev && npm run 'dev:android' && cd ..","dev:electron":"cd dev && npm run 'dev:electron' && cd ..",build:"node build/index.js","build:js":"node build/script.javascript.js"},repository={type:"git",url:""},dependencies={"@vue/compiler-sfc":"^3.2.26","@vuelidate/core":"^2.0.0-alpha.39","@vuelidate/validators":"^2.0.0-alpha.28","merge-images":"^2.0.0","rollup-plugin-vue":"^6.0.0",signature_pad:"^4.0.0",sortablejs:"^1.10.2"},bugs="",homepage="",devDependencies={"@rollup/plugin-buble":"^0.21.3","@rollup/plugin-json":"^4.0.0","@rollup/plugin-node-resolve":"^11.2.1","@rollup/plugin-replace":"^2.4.2",chalk:"^4.1.0","fs-extra":"^8.1.0",open:"^7.3.0",quasar:"^2.4.2",rimraf:"^3.0.0",rollup:"^2.45.0","uglify-js":"^3.13.3",zlib:"^1.0.5"},browserslist=["last 4 Chrome versions","last 4 Firefox versions","last 2 Edge versions","last 4 Safari versions","last 4 Android versions","last 4 ChromeAndroid versions","last 4 FirefoxAndroid versions","last 4 iOS versions"],pkg={name:name,version:version$1,author:author,description:description,license:license,module:module$1,main:main,scripts:scripts,repository:repository,dependencies:dependencies,bugs:bugs,homepage:homepage,devDependencies:devDependencies,browserslist:browserslist};const{version}=pkg;function install(e){e.component(script$a.name,script$a)}var script$9={name:"TyInput",components:{},props:{type:{type:String,required:!0,validator(e){return["text","password","textarea","email","search","tel","number","url","time","date"].includes(e)}},name:{type:String,required:!0},fillMask:Boolean,label:String,hint:String,placeholder:String,behavior:{type:Object,default:()=>({})},modelValue:String,mask:String},emits:["update:modelValue"],setup(e,{emit:t}){const a=vue.inject("formSchema");var o=vue.computed({get:()=>e.modelValue,set:e=>{t("update:modelValue",e)}}),r=vue.computed(()=>({color:a.value.theme.inputs.textColor||void 0})),n=vue.computed(()=>e.type+"_"+e.name);return{formSchema:a,id:n,modelValueRef:o,inputStyle:r}}};const _hoisted_1$8=["for"];function render$8(e,t,a,o,r,n){var i=vue.resolveComponent("q-input");return vue.openBlock(),vue.createElementBlock("div",null,["top"===o.formSchema.theme.inputs.labelStyle?(vue.openBlock(),vue.createElementBlock("label",{key:0,for:o.id,class:"ty-label ty-label-top"},vue.toDisplayString(a.label),9,_hoisted_1$8)):vue.createCommentVNode("",!0),vue.createVNode(i,{label:"top"!==o.formSchema.theme.inputs.labelStyle?a.label:void 0,outlined:"full"===o.formSchema.theme.inputs.style,borderless:o.formSchema.theme.inputs.borderless,"stack-label":"stacked"===o.formSchema.theme.inputs.labelStyle,"input-style":o.inputStyle,dark:o.formSchema.theme.inputs.darkMode,dense:o.formSchema.theme.inputs.dense,clearable:a.behavior.clearable,counter:a.behavior.counter,placeholder:a.placeholder,for:o.id,name:a.name,readonly:a.behavior.readOnly,disable:a.behavior.disabled,type:a.type,mask:a.mask,"fill-mask":a.fillMask,modelValue:o.modelValueRef,"onUpdate:modelValue":t[0]||(t[0]=e=>o.modelValueRef=e),class:"ty-input","bottom-slots":""},{append:vue.withCtx(()=>[vue.renderSlot(e.$slots,"append")]),hint:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["ty-hint",o.formSchema.theme.card.dark?"text-white":"text-black"])},vue.toDisplayString(a.hint),3)]),_:3},8,["label","outlined","borderless","stack-label","input-style","dark","dense","clearable","counter","placeholder","for","name","readonly","disable","type","mask","fill-mask","modelValue"])])}script$9.render=render$8;var TyInput=Object.freeze({__proto__:null,default:script$9}),script$8={name:"TySelect",components:{},props:{type:{type:String},name:{type:String,required:!0},label:String,hint:String,placeholder:String,behavior:{type:Object,default:()=>({})},options:{type:Array,default:()=>[]},modelValue:[Array,Object]},emits:["update:modelValue"],setup(e,{emit:t}){const a=vue.inject("formSchema");var o=vue.ref(e.modelValue),r=vue.computed(()=>e.type+"_"+e.name),n=vue.computed(()=>({color:a.value.theme.inputs.textColor||void 0}));return{formSchema:a,id:r,inputStyle:n,modelValueRef:o,onUpdate:e=>{t("update:modelValue",e)}}}};const _hoisted_1$7={class:"ty-select"},_hoisted_2$3=["for"];function render$7(e,t,a,o,r,n){var i=vue.resolveComponent("q-select");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$7,["top"===o.formSchema.theme.inputs.labelStyle?(vue.openBlock(),vue.createElementBlock("label",{key:0,for:o.id,class:"ty-label ty-label-top"},vue.toDisplayString(a.label),9,_hoisted_2$3)):vue.createCommentVNode("",!0),vue.createVNode(i,{label:"top"!==o.formSchema.theme.inputs.labelStyle?a.label:void 0,outlined:"full"===o.formSchema.theme.inputs.style,borderless:o.formSchema.theme.inputs.borderless,"stack-label":"stacked"===o.formSchema.theme.inputs.labelStyle,"input-style":o.inputStyle,dense:o.formSchema.theme.inputs.dense,dark:o.formSchema.theme.inputs.darkMode,clearable:a.behavior.clearable,counter:a.behavior.counter,placeholder:a.placeholder,for:o.id,readonly:a.behavior.readOnly,disable:a.behavior.disabled,modelValue:o.modelValueRef,"onUpdate:modelValue":[t[0]||(t[0]=e=>o.modelValueRef=e),o.onUpdate],options:a.options,multiple:a.behavior.multiple,"use-chips":a.behavior.multiple,name:a.name,class:"ty-select","bottom-slots":""},{hint:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["ty-hint",o.formSchema.theme.card.dark?"text-white":"text-black"])},vue.toDisplayString(a.hint),3)]),_:1},8,["label","outlined","borderless","stack-label","input-style","dense","dark","clearable","counter","placeholder","for","readonly","disable","modelValue","onUpdate:modelValue","options","multiple","use-chips","name"])])}script$8.render=render$7;var TySelect=Object.freeze({__proto__:null,default:script$8}),script$7={name:"TySlider",components:{},props:{type:{type:String,required:!0},name:{type:String,required:!0},label:String,hint:String,behavior:{type:Object,default:()=>({})},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},defaultValue:{type:[Number,Object]},reverse:Boolean,showThumbLabel:{type:String,default:"always",validator(e){return["always","off","onSlide"].includes(e)}},thumbLabelPrefix:{type:String,default:""},thumbLabelSuffix:{type:String,default:""},snap:Boolean,markers:Boolean,range:Boolean,modelValue:{type:[Number,Object]}},setup(e,{emit:t}){var a=vue.inject("formSchema"),o=vue.computed({get:()=>null===e.modelValue||void 0===e.modelValue?void 0!==e.defaultValue&&null!==e.defaultValue?e.defaultValue:e.range?{min:e.min||0,max:e.max||100}:50:e.modelValue,set:e=>{t("update:modelValue",e)}}),r=vue.computed(()=>e.type+"_"+e.name);return{componentType:vue.computed(()=>e.range?quasar.QRange:quasar.QSlider),formSchema:a,id:r,modelValueRef:o}}};const _hoisted_1$6={class:"ty-label ty-label-top"};function render$6(e,t,a,o,r,n){return vue.openBlock(),vue.createElementBlock("div",null,[vue.createElementVNode("label",_hoisted_1$6,vue.toDisplayString(a.label),1),(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(o.componentType),{name:a.name,readonly:a.behavior.readOnly,disable:a.behavior.disabled,min:a.min,max:a.max,step:a.step,reverse:a.reverse,label:"off"!==a.showThumbLabel,"label-always":"always"===a.showThumbLabel,"label-value":a.thumbLabelPrefix+o.modelValueRef+a.thumbLabelSuffix,"left-label-value":a.range?a.thumbLabelPrefix+o.modelValueRef.min+a.thumbLabelSuffix:"","right-label-value":a.range?a.thumbLabelPrefix+o.modelValueRef.max+a.thumbLabelSuffix:"",snap:a.snap,markers:a.markers,class:"q-mt-lg",modelValue:o.modelValueRef,"onUpdate:modelValue":t[0]||(t[0]=e=>o.modelValueRef=e),dark:o.formSchema.theme.card.dark},null,8,["name","readonly","disable","min","max","step","reverse","label","label-always","label-value","left-label-value","right-label-value","snap","markers","modelValue","dark"])),a.hint?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass([o.formSchema.theme.card.dark?"text-white":"text-black","ty-hint text-caption q-ml-sm"])},vue.toDisplayString(a.hint),3)):vue.createCommentVNode("",!0)])}script$7.render=render$6;var TySlider=Object.freeze({__proto__:null,default:script$7}),script$6={name:"TyRating",components:{},props:{type:{type:String,required:!0},name:{type:String,required:!0},label:String,hint:String,size:{String:String},behavior:{type:Object,default:()=>({})},defaultValue:Number,shape:{type:String,validator(e){return["heart","star","thumb","battery","dice","emoji","gem","bulb","lemon","moon","sun","hand-spock","numeric"].includes(e)}},max:{type:Number,validator(e){return 2<=e&e<=14}},modelValue:{type:Number}},setup(e,{emit:t}){vue.inject("formSchema");var a=vue.computed({get:()=>null===e.modelValue||void 0===e.modelValue?void 0!==e.defaultValue&&null!==e.defaultValue?e.defaultValue:0:e.modelValue,set:e=>{t("update:modelValue",e)}});return{id:vue.computed(()=>e.type+"_"+e.name),modelValueComputed:a,sizeComputed:vue.computed(()=>e.size||"2em"),maxComputed:vue.computed(()=>e.max||5),iconProps:vue.computed(()=>({heart:{icon:"far fa-heart",iconSelected:"fas fa-heart",noDimming:!0},star:{icon:"far fa-star",iconSelected:"fas fa-star",noDimming:!0},thumb:{icon:"far fa-thumbs-up",iconSelected:"fas fa-thumbs-up",noDimming:!0},battery:{icon:["fas fa-battery-empty","fas fa-battery-quarter","fas fa-battery-half","fas fa-battery-three-quarters","fas fa-battery-full"],noDimming:!1},dice:{icon:["fas fa-dice-one","fas fa-dice-two","fas fa-dice-three","fas fa-dice-four","fas fa-dice-five","fas fa-dice-six"],noDimming:!1},emoji:{icon:["far fa-sad-tear","far fa-frown-open","far fa-meh","far fa-grin-alt","far fa-grin-stars"],iconSelected:["fas fa-sad-tear","fas fa-frown-open","fas fa-meh","fas fa-grin-alt","fas fa-grin-stars"],noDimming:!0},gem:{icon:"far fa-gem",iconSelected:"fas fa-gem",noDimming:!1},bulb:{icon:"far fa-lightbulb",iconSelected:"fas fa-lightbulb",noDimming:!0},lemon:{icon:"far fa-lemon",iconSelected:"fas fa-lemon",noDimming:!0},moon:{icon:"far fa-moon",iconSelected:"fas fa-moon",noDimming:!0},sun:{icon:"far fa-sun",iconSelected:"fas fa-sun",noDimming:!0},"hand-spock":{icon:"far fa-hand-spock",iconSelected:"fas fa-hand-spock",noDimming:!0},numeric:{icon:["mdi-numeric-1-box-outline"],iconSelected:["mdi-numeric-1-box"],noDimming:!0}})[e.shape||"star"])}}};const _hoisted_1$5={class:"col ty-rating"},_hoisted_2$2={class:"ty-label ty-label-top",style:{display:"block"}};function render$5(e,t,a,o,r,n){var i=vue.resolveComponent("q-rating");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$5,[vue.createElementVNode("label",_hoisted_2$2,vue.toDisplayString(a.label),1),vue.createVNode(i,{name:a.name,readonly:a.behavior.readOnly,disable:a.behavior.disabled,class:"q-mt-md full-width",modelValue:o.modelValueComputed,"onUpdate:modelValue":t[0]||(t[0]=e=>o.modelValueComputed=e),size:o.sizeComputed,icon:o.iconProps.icon,"icon-selected":o.iconProps.iconSelected,"no-dimming":o.iconProps.noDimming,max:o.maxComputed},null,8,["name","readonly","disable","modelValue","size","icon","icon-selected","no-dimming","max"]),a.hint?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass([e.formSchema.theme.card.dark?"text-white":"text-black","text-caption q-ml-sm ty-hint"])},vue.toDisplayString(a.hint),3)):vue.createCommentVNode("",!0)])}script$6.render=render$5;var TyRating=Object.freeze({__proto__:null,default:script$6}),script$5={name:"TyOptionGroup",components:{},props:{type:{type:String,required:!0,validator(e){return["radio","checkbox","toggle"].includes(e)}},name:{type:String,required:!0},label:String,labelSide:{type:String,default:"right",validator(e){return["left","right"].includes(e)}},inline:Boolean,options:{type:Array,default:()=>[]},hint:String,behavior:{type:Object,default:()=>({})},modelValue:[String,Array]},emits:["update:modelValue"],setup(e,{emit:t}){var a=vue.inject("formSchema");const o=vue.ref(e.modelValue);null===o.value&&"radio"!==e.type&&(o.value=[]);var r=vue.computed(()=>e.options.map(e=>({label:e.label,value:e.value||e.label})));return{modelValueRef:o,optionList:r,onUpdate:e=>{t("update:modelValue",e)},formSchema:a}}};const _hoisted_1$4={class:"ty-label ty-label-top"},_hoisted_2$1={key:0,class:"text-caption q-ml-sm ty-hint"};function render$4(e,t,a,o,r,n){var i=vue.resolveComponent("q-option-group");return vue.openBlock(),vue.createElementBlock("div",null,[vue.createElementVNode("label",_hoisted_1$4,vue.toDisplayString(a.label),1),vue.createElementVNode("div",{class:vue.normalizeClass(o.formSchema.theme.card.dark?"text-white":"text-black")},[vue.createVNode(i,{name:a.name,type:a.type,readonly:a.behavior.readOnly,disable:a.behavior.disabled,"left-label":"left"===a.labelSide,inline:a.inline,modelValue:o.modelValueRef,"onUpdate:modelValue":[t[0]||(t[0]=e=>o.modelValueRef=e),o.onUpdate],options:o.optionList,dark:o.formSchema.theme.card.dark},null,8,["name","type","readonly","disable","left-label","inline","modelValue","onUpdate:modelValue","options","dark"]),a.hint?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$1,vue.toDisplayString(a.hint),1)):vue.createCommentVNode("",!0)],2)])}script$5.render=render$4;var TyOptionGroup=Object.freeze({__proto__:null,default:script$5}),script$4={name:"TyHtml",components:{},props:{type:{type:String,required:!0},name:{type:String,required:!0},html:String,behavior:{type:Object,default:()=>({})}},setup(e){var t=vue.ref(e.html);return{id:vue.computed(()=>e.type+"_"+e.name),refHtml:t}}};const _hoisted_1$3=["innerHTML"];function render$3(e,t,a,o,r,n){return vue.openBlock(),vue.createElementBlock("div",{innerHTML:o.refHtml},null,8,_hoisted_1$3)}script$4.render=render$3;var TyHtml=Object.freeze({__proto__:null,default:script$4}),script$3={name:"TyTitle",components:{},props:{type:{type:String,required:!0},name:{type:String,required:!0},titles:{type:Array,default:()=>[]},behavior:{type:Object,default:()=>({})}},setup(e){return{id:vue.computed(()=>e.type+"_"+e.name),escape:e=>{return function(e,t){for(var[a,o]of t.entries()){var r=Object.keys(o),o=Object.values(o);e=e.replaceAll(r,o)}return e}(e,[{"&":"&amp"},{"<":"&lt"},{">":"&gt"},{'"':"&quot"},{"'":"&#39"},{"\n":"<br>"}])}}}};const _hoisted_1$2=["innerHTML"];function render$2(e,t,a,o,r,n){return vue.openBlock(),vue.createElementBlock("div",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.titles,(e,t)=>(vue.openBlock(),vue.createElementBlock("p",{key:e.size+"_"+t,class:vue.normalizeClass(["text-"+e.size||"h3","q-py-"+(e.padding||"md"),"text-"+e.align||"left"]),style:vue.normalizeStyle({color:e.color||"#000000"}),innerHTML:o.escape(e.text)},null,14,_hoisted_1$2))),128))])}script$3.render=render$2;var TyTitle=Object.freeze({__proto__:null,default:script$3}),script$2={name:"TyDate",components:{TyInput:script$9},props:{type:{type:String,required:!0,validator(e){return"date"===e}},name:{type:String,required:!0},label:String,hint:String,placeholder:String,behavior:{type:Object,default:()=>({})},modelValue:[String,Object],range:Boolean},emits:["update:modelValue"],setup(t,{emit:a}){var e=vue.computed(()=>({type:"text",mask:t.range?"##/##/#### - ##/##/####":"##/##/####",label:t.label,name:t.name,hint:t.hint,placeholder:t.placeholder,behavior:t.behavior,fillMask:!0})),o=vue.computed({get:()=>t.modelValue,set:e=>{a("update:modelValue",e)}});return{inputModel:e,inputModelValue:vue.computed({get:()=>{if("string"==typeof t.modelValue)return t.modelValue;var e="__/__/____";return(t.modelValue&&t.modelValue.from||e)+" - "+(t.modelValue&&t.modelValue.to||e)},set:e=>{var[t,e]=e.split("-").map(e=>e.trim());a("update:modelValue",{from:t,to:e})}}),pickerModelValue:o}}};const _hoisted_1$1={class:"row items-center justify-end"};function render$1(e,t,a,o,r,n){const i=vue.resolveComponent("q-btn"),l=vue.resolveComponent("q-date"),s=vue.resolveComponent("q-popup-proxy"),u=vue.resolveComponent("q-icon");var d=vue.resolveComponent("TyInput");const c=vue.resolveDirective("close-popup");return vue.openBlock(),vue.createBlock(d,vue.mergeProps(o.inputModel,{modelValue:o.inputModelValue,"onUpdate:modelValue":t[1]||(t[1]=e=>o.inputModelValue=e)}),{append:vue.withCtx(()=>[vue.createVNode(u,{name:"event",class:"cursor-pointer"},{default:vue.withCtx(()=>[vue.createVNode(s,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:vue.withCtx(()=>[vue.createVNode(l,{modelValue:o.pickerModelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>o.pickerModelValue=e),mask:"DD/MM/YYYY",range:a.range,color:"primary"},{default:vue.withCtx(()=>[vue.createElementVNode("div",_hoisted_1$1,[vue.withDirectives(vue.createVNode(i,{label:"Close",color:"primary",flat:""},null,512),[[c]])])]),_:1},8,["modelValue","range"])]),_:1},512)]),_:1})]),_:1},16,["modelValue"])}script$2.render=render$1;var TyDate=Object.freeze({__proto__:null,default:script$2});class Point{constructor(e,t,a,o){if(isNaN(e)||isNaN(t))throw new Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=a||0,this.time=o||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class Bezier{constructor(e,t,a,o,r,n){this.startPoint=e,this.control2=t,this.control1=a,this.endPoint=o,this.startWidth=r,this.endWidth=n}static fromPoints(e,t){var a=this.calculateControlPoints(e[0],e[1],e[2]).c2,o=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Bezier(e[1],a,o,e[2],t.start,t.end)}static calculateControlPoints(e,t,a){var o=e.x-t.x,r=e.y-t.y,n=t.x-a.x,i=t.y-a.y,e={x:(e.x+t.x)/2,y:(e.y+t.y)/2},a={x:(t.x+a.x)/2,y:(t.y+a.y)/2},r=Math.sqrt(o*o+r*r),i=Math.sqrt(n*n+i*i),r=i/(r+i),i={x:a.x+(e.x-a.x)*r,y:a.y+(e.y-a.y)*r},r=t.x-i.x,i=t.y-i.y;return{c1:new Point(e.x+r,e.y+i),c2:new Point(a.x+r,a.y+i)}}length(){let t=0,a,o;for(let e=0;e<=10;e+=1){var r,n=e/10,i=this.point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this.point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);0<e&&(r=i-a,n=l-o,t+=Math.sqrt(r*r+n*n)),a=i,o=l}return t}point(e,t,a,o,r){return t*(1-e)*(1-e)*(1-e)+3*a*(1-e)*(1-e)*e+3*o*(1-e)*e*e+r*e*e*e}}function throttle(o,r=250){let n=0,i=null,l,s,u;const d=()=>{n=Date.now(),i=null,l=o.apply(s,u),i||(s=null,u=[])};return function(...e){var t=Date.now(),a=r-(t-n);return s=this,u=e,a<=0||r<a?(i&&(clearTimeout(i),i=null),n=t,l=o.apply(s,u),i||(s=null,u=[])):i=i||window.setTimeout(d,a),l}}class SignaturePad extends EventTarget{constructor(e,t={}){super(),this.canvas=e,this.options=t,this._handleMouseDown=e=>{1===e.buttons&&(this._drawningStroke=!0,this._strokeBegin(e))},this._handleMouseMove=e=>{this._drawningStroke&&this._strokeMoveUpdate(e)},this._handleMouseUp=e=>{1===e.buttons&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(e))},this._handleTouchStart=e=>{e.preventDefault(),1===e.targetTouches.length&&(e=e.changedTouches[0],this._strokeBegin(e))},this._handleTouchMove=e=>{e.preventDefault();e=e.targetTouches[0];this._strokeMoveUpdate(e)},this._handleTouchEnd=e=>{e.target===this.canvas&&(e.preventDefault(),e=e.changedTouches[0],this._strokeEnd(e))},this._handlePointerStart=e=>{this._drawningStroke=!0,e.preventDefault(),this._strokeBegin(e)},this._handlePointerMove=e=>{this._drawningStroke&&(e.preventDefault(),this._strokeMoveUpdate(e))},this._handlePointerEnd=e=>{this._drawningStroke=!1,e.target===this.canvas&&(e.preventDefault(),this._strokeEnd(e))},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.dotSize=t.dotSize||0,this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?throttle(SignaturePad.prototype._strokeUpdate,this.throttle):SignaturePad.prototype._strokeUpdate,this._ctx=e.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(s,u={}){return new Promise((e,t)=>{const a=new Image;var o=u.ratio||window.devicePixelRatio||1;const r=u.width||this.canvas.width/o,n=u.height||this.canvas.height/o,i=u.xOffset||0,l=u.yOffset||0;this._reset(),a.onload=()=>{this._ctx.drawImage(a,i,l,r,n),e()},a.onerror=e=>{t(e)},a.crossOrigin="anonymous",a.src=s,this._isEmpty=!1})}toDataURL(e="image/png",t){return"image/svg+xml"!==e?this.canvas.toDataURL(e,t):this._toSVG()}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=t?e:this._data.concat(e)}toData(){return this._data}_strokeBegin(e){this.dispatchEvent(new CustomEvent("beginStroke",{detail:e}));var t={dotSize:this.dotSize,minWidth:this.minWidth,maxWidth:this.maxWidth,penColor:this.penColor,points:[]};this._data.push(t),this._reset(),this._strokeUpdate(e)}_strokeUpdate(e){if(0!==this._data.length){this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));var t=e.clientX,a=e.clientY,o=void 0!==e.pressure?e.pressure:void 0!==e.force?e.force:0;const l=this._createPoint(t,a,o);var r=this._data[this._data.length-1];const s=r.points;var n=0<s.length&&s[s.length-1],i=!!n&&l.distanceTo(n)<=this.minDistance,{penColor:t,dotSize:a,minWidth:o,maxWidth:r}=r;n&&n&&i||(i=this._addPoint(l),n?i&&this._drawCurve(i,{penColor:t,dotSize:a,minWidth:o,maxWidth:r}):this._drawDot(l,{penColor:t,dotSize:a,minWidth:o,maxWidth:r}),s.push({time:l.time,x:l.x,y:l.y,pressure:l.pressure})),this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}else this._strokeBegin(e)}_strokeEnd(e){this._strokeUpdate(e),this.dispatchEvent(new CustomEvent("endStroke",{detail:e}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),document.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(e,t,a){var o=this.canvas.getBoundingClientRect();return new Point(e-o.left,t-o.top,a,(new Date).getTime())}_addPoint(e){const{_lastPoints:t}=this;if(t.push(e),2<t.length){3===t.length&&t.unshift(t[0]);e=this._calculateCurveWidths(t[1],t[2]),e=Bezier.fromPoints(t,e);return t.shift(),e}return null}_calculateCurveWidths(e,t){var a=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,t=this._strokeWidth(a),e={end:t,start:this._lastWidth};return this._lastVelocity=a,this._lastWidth=t,e}_strokeWidth(e){return Math.max(this.maxWidth/(e+1),this.minWidth)}_drawCurveSegment(e,t,a){const o=this._ctx;o.moveTo(e,t),o.arc(e,t,a,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,a){const e=this._ctx;var o=t.endWidth-t.startWidth,r=2*Math.ceil(t.length());e.beginPath(),e.fillStyle=a.penColor;for(let e=0;e<r;e+=1){var n=e/r,i=n*n,l=i*n,s=1-n,u=s*s,d=u*s,c=d*t.startPoint.x;c+=3*u*n*t.control1.x,c+=3*s*i*t.control2.x,c+=l*t.endPoint.x;d=d*t.startPoint.y;d+=3*u*n*t.control1.y,d+=3*s*i*t.control2.y,d+=l*t.endPoint.y;l=Math.min(t.startWidth+l*o,a.maxWidth);this._drawCurveSegment(c,d,l)}e.closePath(),e.fill()}_drawDot(e,t){const a=this._ctx;var o=0<t.dotSize?t.dotSize:(t.minWidth+t.maxWidth)/2;a.beginPath(),this._drawCurveSegment(e.x,e.y,o),a.closePath(),a.fillStyle=t.penColor,a.fill()}_fromData(e,t,a){for(const u of e){var{penColor:o,dotSize:r,minWidth:n,maxWidth:i,points:l}=u;if(1<l.length)for(let e=0;e<l.length;e+=1){var s=l[e],s=new Point(s.x,s.y,s.pressure,s.time);this.penColor=o,0===e&&this._reset();s=this._addPoint(s);s&&t(s,{penColor:o,dotSize:r,minWidth:n,maxWidth:i})}else this._reset(),a(l[0],{penColor:o,dotSize:r,minWidth:n,maxWidth:i})}}_toSVG(){var e=this._data,t=Math.max(window.devicePixelRatio||1,1),a=this.canvas.width/t,t=this.canvas.height/t;const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width",this.canvas.width.toString()),l.setAttribute("height",this.canvas.height.toString()),this._fromData(e,(e,{penColor:t})=>{const a=document.createElement("path");var o;isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y)||(o=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} `+`C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} `+`${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} `+`${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`,a.setAttribute("d",o),a.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),a.setAttribute("stroke",t),a.setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),l.appendChild(a))},(e,{penColor:t,dotSize:a,minWidth:o,maxWidth:r})=>{const n=document.createElement("circle"),i=0<a?a:(o+r)/2;n.setAttribute("r",i.toString()),n.setAttribute("cx",e.x.toString()),n.setAttribute("cy",e.y.toString()),n.setAttribute("fill",t),l.appendChild(n)});t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+` viewBox="0 0 ${this.canvas.width} ${this.canvas.height}"`+` width="${a}"`+` height="${t}"`+">";let o=l.innerHTML;if(void 0===o){const r=document.createElement("dummy"),n=l.childNodes;r.innerHTML="";for(let e=0;e<n.length;e+=1)r.appendChild(n[e].cloneNode(!0));o=r.innerHTML}t=t+o+"</svg>";return"data:image/svg+xml;base64,"+btoa(t)}}var defaultOptions={format:"image/png",quality:.92,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0},mergeImages=function(o,i){return void 0===o&&(o=[]),void 0===i&&(i={}),new Promise(function(e){var r=(i=Object.assign({},defaultOptions,i)).Canvas?new i.Canvas:window.document.createElement("canvas"),n=i.Image||window.Image,t=o.map(function(o){return new Promise(function(e,t){"Object"!==o.constructor.name&&(o={src:o});var a=new n;a.crossOrigin=i.crossOrigin,a.onerror=function(){return t(new Error("Couldn't load image"))},a.onload=function(){return e(Object.assign({},o,{img:a}))},a.src=o.src})}),a=r.getContext("2d");e(Promise.all(t).then(function(e){function t(t){return i[t]||Math.max.apply(Math,e.map(function(e){return e.img[t]}))}return r.width=t("width"),r.height=t("height"),e.forEach(function(e){return a.globalAlpha=e.opacity||1,a.drawImage(e.img,e.x||0,e.y||0)}),i.Canvas&&"image/jpeg"===i.format?new Promise(function(a,o){r.toDataURL(i.format,{quality:i.quality,progressive:!1},function(e,t){e?o(e):a(t)})}):r.toDataURL(i.format,i.quality)}))})},script$1=vue.defineComponent({name:"VueSignaturePad",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},customStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})},images:{type:Array,default:()=>[]}},data:()=>({signaturePad:{},cacheImages:[],signatureData:TRANSPARENT_PNG,onResizeHandler:null}),computed:{propsImagesAndCustomImages(){var e=convert2NonReactive(this.images),t=convert2NonReactive(this.cacheImages);return[...e,...t]}},watch:{options:function(t){Object.keys(t).forEach(e=>{this.signaturePad[e]&&(this.signaturePad[e]=t[e])})}},mounted(){const{options:e}=this;var t=this.$refs.signaturePadCanvas;const a=new SignaturePad(t,{...DEFAULT_OPTIONS,...e});this.signaturePad=a,e.resizeHandler&&(this.resizeCanvas=e.resizeHandler.bind(this)),this.onResizeHandler=this.resizeCanvas.bind(this),window.addEventListener("resize",this.onResizeHandler,!1),this.resizeCanvas(),e.onUpdate&&a.addEventListener("endStroke",()=>{e.onUpdate()})},beforeUnmount(){this.onResizeHandler&&window.removeEventListener("resize",this.onResizeHandler,!1)},methods:{resizeCanvas(){const e=this.$refs.signaturePadCanvas;var t=this.signaturePad.toData(),a=Math.max(window.devicePixelRatio||1,1);e.width=e.offsetWidth*a,e.height=e.offsetHeight*a,e.getContext("2d").scale(a,a),this.signaturePad.clear(),this.signatureData=TRANSPARENT_PNG,this.signaturePad.fromData(t)},saveSignature(e=IMAGE_TYPES[0],t){const{signaturePad:a}=this;var o={isEmpty:!1,data:void 0};if(checkSaveType(e))return a.isEmpty()?{...o,isEmpty:!0}:(this.signatureData=a.toDataURL(e,t),{...o,data:this.signatureData});o=IMAGE_TYPES.join(", ");throw new Error(`The Image type is incorrect! We are support ${o} types.`)},undoSignature(){const{signaturePad:e,options:t}=this,a=e.toData();a&&(e.fromData(a.slice(0,-1)),t.onUpdate&&t.onUpdate())},mergeImageAndSignature(e){return this.signatureData=e,mergeImages([...this.images,...this.cacheImages,this.signatureData])},addImages(e=[]){return this.cacheImages=[...this.cacheImages,...e],mergeImages([...this.images,...this.cacheImages,this.signatureData])},fromDataURL(e,t={},a){return this.signaturePad.fromDataURL(e,t,a)},fromData(e){return this.signaturePad.fromData(e)},toData(){return this.signaturePad.toData()},lockSignaturePad(){return this.signaturePad.off()},openSignaturePad(){return this.signaturePad.on()},isEmpty(){return this.signaturePad.isEmpty()},getPropImagesAndCacheImages(){return this.propsImagesAndCustomImages},clearCacheImages(){return this.cacheImages=[],this.cacheImages},clearSignature(){this.signaturePad.clear(),this.options.onUpdate&&this.options.onUpdate()}},render(){var{width:e,height:t,customStyle:a}=this;return vue.h("div",{style:{width:e,height:t,...a}},[vue.h("canvas",{style:{width:e,height:t},ref:"signaturePadCanvas"})])}});const IMAGE_TYPES=["image/png","image/jpeg","image/svg+xml"],checkSaveType=e=>IMAGE_TYPES.includes(e),DEFAULT_OPTIONS={dotSize:1.5,minWidth:.2,maxWidth:2.5,throttle:20,minDistance:7,backgroundColor:"rgba(0,0,0,0)",penColor:"black",velocityFilterWeight:.7},convert2NonReactive=e=>JSON.parse(JSON.stringify(e)),TRANSPARENT_PNG={src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",x:0,y:0};var script={name:"TySignature",components:{VueSignature:script$1},props:{type:{type:String,required:!0},name:{type:String,required:!0},label:String,hint:String,behavior:{type:Object,default:()=>({})},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},defaultValue:{type:[Number,Object]},modelValue:{type:String}},setup(e,{emit:t}){var a=vue.inject("formSchema"),o=vue.computed(()=>e.type+"_"+e.name);const r=vue.ref(null);return{undo:()=>{r.value.undoSignature()},clear:()=>{r.value.clearSignature()},onUpdate:()=>{var{data:e}=r.value.saveSignature("image/svg+xml");t("update:modelValue",e)},signaturePad:r,id:o,formSchema:a}}};const _hoisted_1={class:"ty-signature"},_hoisted_2={class:"ty-label ty-label-top"},_hoisted_3={class:"buttons-wrapper q-mt-sm"},_hoisted_4=vue.createTextVNode("Undo"),_hoisted_5=vue.createTextVNode("Clear");function render(e,t,a,o,r,n){var i=vue.resolveComponent("vue-signature"),l=vue.resolveComponent("q-btn");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1,[vue.createElementVNode("label",_hoisted_2,vue.toDisplayString(a.label),1),a.hint?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass([o.formSchema.theme.card.dark?"text-white":"text-black","ty-hint text-caption q-ml-sm"])},vue.toDisplayString(a.hint),3)):vue.createCommentVNode("",!0),vue.createVNode(i,{ref:"signaturePad",options:{onUpdate:o.onUpdate},height:"250px"},null,8,["options"]),vue.createElementVNode("div",_hoisted_3,[vue.createVNode(l,{unelevated:"",color:"grey-4","text-color":"grey-9",class:"q-mr-md",onClick:o.undo},{default:vue.withCtx(()=>[_hoisted_4]),_:1},8,["onClick"]),vue.createVNode(l,{unelevated:"",color:"grey-4","text-color":"grey-9",class:"q-mr-md",onClick:o.clear},{default:vue.withCtx(()=>[_hoisted_5]),_:1},8,["onClick"])])])}script.render=render;var TySignature=Object.freeze({__proto__:null,default:script});exports.TyFormViewer=script$a,exports.install=install,exports.version=version;