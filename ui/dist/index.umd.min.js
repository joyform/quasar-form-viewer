/*!
 * quasar-ui-tyformviewer v0.1.46
 * (c) 2021 dan@typefully.io
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("quasar")):"function"==typeof define&&define.amd?define(["vue","quasar"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).TyFormViewer=t(e.Vue,e.Quasar)}(this,function(b,y){"use strict";var e={name:"Block",components:{TyText:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TyPassword:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TyTextarea:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TyEmail:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TySearch:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TyTel:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TyNumber:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TyUrl:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return r})}),TySelect:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return n})}),TySlider:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return l})}),TyCheckbox:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return c})}),TyRadio:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return c})}),TyToggle:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return c})}),TyHtml:b.defineAsyncComponent(function(){return Promise.resolve().then(function(){return u})})},props:{blockSchema:Object,modelValue:[String,Boolean,Number,Array,Object]},emits:["update:modelValue"],setup:function(e,t){var o=t.emit,r=b.ref(null),t=b.ref(!1),n=b.reactive(e.blockSchema),e=b.ref(e.modelValue);return{el:r,hover:t,behavior:b.computed(function(){return{readOnly:"on"===n.behavior.readOnly,required:"on"===n.behavior.required,clearable:"on"===n.behavior.clearable,disabled:"on"===n.behavior.disabled,displayed:"on"===n.behavior.displayed,counter:"on"===n.behavior.counter,multiple:!!n.behavior.multiple}}),schema:n,modelValueRef:e,onUpdate:function(e){o("update:modelValue",e)}}}};e.render=function(e,t,o,r,n,l){return r.behavior.displayed?(b.openBlock(),b.createBlock("div",{key:0,class:"ty-block",style:{position:"relative"},ref:"el",onMouseover:t[2]||(t[2]=function(e){return r.hover=!0}),onMouseleave:t[3]||(t[3]=function(e){return r.hover=!1})},[b.renderSlot(e.$slots,"beforeblock",{blockSchema:r.schema,el:r.el,hover:r.hover}),(b.openBlock(),b.createBlock(b.resolveDynamicComponent("ty-"+r.schema.type),b.mergeProps(r.schema,{behavior:r.behavior,class:"q-my-md",modelValue:r.modelValueRef,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return r.modelValueRef=e}),r.onUpdate]}),null,16,["behavior","modelValue","onUpdate:modelValue"]))],544)):b.createCommentVNode("",!0)};var t=b.defineComponent({name:"TyFormViewer",components:{Block:e,QForm:y.QForm,QCard:y.QCard,QParallax:y.QParallax,QImg:y.QImg,QCardSection:y.QCardSection},props:{formSchema:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},embedded:Boolean},setup:function(e){var t=b.reactive(e.formData),o=b.ref(null),r=b.ref(0),n=b.ref(null),l=b.reactive(e.formSchema);b.watch(function(){return l},function(){l.pages.forEach(function(e){e.blocks.forEach(function(e){void 0===t[e.name]&&(t[e.name]=null)})})},{immediate:!0}),b.provide("formSchema",l);var a=b.computed(function(){if("gradient"===l.theme.page.backgroundType){var e=l.theme.page.backgroundGradient;return"linear"===e.type?{background:"linear-gradient("+e.direction+"deg, "+e.color1+" "+e.position1+"%, "+e.color2+" "+e.position2+"%)"}:{background:"radial-gradient(circle at center, "+e.color1+" "+e.position1+"%, "+e.color2+" "+e.position2+"%)"}}e={backgroundColor:l.theme.page.backgroundColor||"#fff"};return"image"===l.theme.page.backgroundType&&Object.assign(e,{backgroundImage:l.theme.page.backgroundImage?'url("'+l.theme.page.backgroundImage+'")':null,backgroundSize:"cover"}),e}),i=b.computed(function(){return("left"===l.theme.card.cover.position||"right"===l.theme.card.cover.position)&&n.value&&n.value.clientWidth>=(l.theme.card.revertToVerticalIfWidthBelow||600)}),c=b.computed(function(){return"none"!==l.theme.card.cover.position}),u=b.computed(function(){return{backgroundColor:l.theme.card.backgroundColor||"#fff",backdropFilter:l.theme.card.backdrop,width:"100%",maxWidth:l.theme.card.maxWidth+"px",maxHeight:l.theme.card.maxHeight?l.theme.card.maxHeight+"px":void 0,borderRadius:l.theme.card.cornersRadius+"px",border:l.theme.card.border?l.theme.card.border.width+"px solid "+l.theme.card.border.color:0,overflow:"hidden"}}),d=b.computed(function(){var e=[];return 0===l.theme.card.shadow?e.push("no-shadow"):e.push("shadow-"+l.theme.card.shadow),e}),m=b.computed(function(){var e=[];return l.theme.card.cover.widthCols&&e.push("col-"+l.theme.card.cover.widthCols),e}),s=b.computed(function(){var e=[];return i.value&&(e.push("row"),"right"===l.theme.card.cover.position&&e.push("reverse")),e}),p=b.computed(function(){var e=[];return l.theme.card.cover.widthCols&&e.push("col-"+(12-l.theme.card.cover.widthCols)),e}),h=b.computed(function(){var e=l.theme.card.border?l.theme.card.border.width:0,t=l.theme.card.maxHeight||9999,o=n.value?n.value.clientHeight:9999,r=i.value?9999:l.theme.card.cover.height||180;return Math.min(t,o,r)-e*(i.value?2:1)}),f=b.computed(function(){var e={},t=l.theme.card.cornersRadius;return i.value&&!l.theme.card.cover.widthCols&&l.theme.card.width&&(e.width=l.theme.card.cover.width+"px"),0<t&&(e.borderRadius="0"),e}),e=b.computed(function(){return{borderRadius:l.theme.buttons.cornersRadius+"px",backgroundColor:l.theme.buttons.backgroundColor,border:l.theme.buttons.border?l.theme.buttons.border.width+"px solid "+l.theme.buttons.border.color:void 0}});return{pageStyle:a,cardStyle:u,cardClasses:d,openTypefully:function(){return y.openURL("https://typefully.io")},currentPage:r,reactiveFormSchema:l,mainPage:n,horizontal:i,showCover:c,coverClasses:m,formClasses:p,coverStyle:f,coverHeight:h,coverWrapperClasses:s,buttonStyle:e,buttonClicked:function(){l.pages.length-1>r.value?r.value+=1:fetch(l.form.actionUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),mode:"cors"}).then(function(e){return e.json()}).then(function(e){console.log("response",e)})},formComp:o,reactiveFormData:t,onUpdate:function(e,t){console.log(e+" = "+t+" ["+typeof t+"] | "+JSON.stringify(t))}}}}),f={class:"ty-main-page fit relative-position absolute",ref:"mainPage",style:{"z-index":"5",bottom:"0",top:"0",right:"0",left:"0"}},v={key:0,class:"absolute-bottom q-pa-sm text-white",style:{"background-color":"#00000088"}},g={key:0,class:"text-h6"},S={key:1,class:"text-subtitle2"},k={key:0,class:"absolute-bottom"},V={class:"text-h6"},C={class:"text-subtitle2"},x={key:2,class:"q-pa-md"},B={key:0,class:"text-h6"},w={key:1,class:"text-subtitle2"};t.render=function(r,o,e,t,n,l){var a=b.resolveComponent("q-parallax"),i=b.resolveComponent("q-img"),c=b.resolveComponent("block"),u=b.resolveComponent("q-btn"),d=b.resolveComponent("q-card-section"),m=b.resolveComponent("q-card"),s=b.resolveComponent("q-tab-panel"),p=b.resolveComponent("q-tab-panels"),h=b.resolveComponent("q-form");return b.openBlock(),b.createBlock(b.Fragment,null,[(b.openBlock(),b.createBlock(b.resolveDynamicComponent("style"),null,{default:b.withCtx(function(){return[b.createTextVNode(" .q-field--outlined .q-field__control { border-radius: "+b.toDisplayString(r.reactiveFormSchema.theme.inputs.cornersRadius)+"px; } .q-field--outlined .q-field__control { background-color: rgba("+b.toDisplayString(r.reactiveFormSchema.theme.inputs.fill<0?"0,0,0":"255,255,255")+","+b.toDisplayString(r.reactiveFormSchema.theme.inputs.fill/100*(r.reactiveFormSchema.theme.inputs.fill<0?-1:1))+"); } .min-height-100p { min-height: 100%; } .full-height-100vh { min-height:100vh; } .ty-submit-btn { color: "+b.toDisplayString(r.reactiveFormSchema.theme.buttons.textColor||"#000000")+" } .ty-back-btn { color: "+b.toDisplayString(r.reactiveFormSchema.theme.buttons.backTextColor||"#000000")+" } ",1)]}),_:1})),b.createVNode("div",{class:{fullscreen:!r.embedded,fit:r.embedded},style:[r.pageStyle,{"z-index":"1"}]},null,6),b.createVNode("div",f,[b.createVNode(h,{action:r.reactiveFormSchema.form.actionUrl,method:"post",ref:"formComp",class:"fit"},{default:b.withCtx(function(){return[b.createVNode(p,{modelValue:r.currentPage,"onUpdate:modelValue":o[2]||(o[2]=function(e){return r.currentPage=e}),animated:"",swipeable:"",class:"bg-transparent fit"},{default:b.withCtx(function(){return[(b.openBlock(!0),b.createBlock(b.Fragment,null,b.renderList(r.reactiveFormSchema.pages,function(e,t){return b.openBlock(),b.createBlock(s,{key:t,name:t,style:{},class:["q-pa-none bg-transparent fit flex flex-center",{"min-height-100p":r.embedded,"full-height-100vh":!r.embedded}]},{default:b.withCtx(function(){return[b.createVNode(m,{style:r.cardStyle,class:r.cardClasses},{default:b.withCtx(function(){return[(b.openBlock(),b.createBlock(b.resolveDynamicComponent(r.horizontal?"q-card-section":"div"),{horizontal:r.horizontal,class:r.coverWrapperClasses},{default:b.withCtx(function(){return[r.showCover&&e.cover&&e.cover.parallax?(b.openBlock(),b.createBlock(a,{key:0,src:e.cover.backgroundImage,height:r.coverHeight,class:r.coverClasses,style:r.coverStyle},{default:b.withCtx(function(){return[e.header||e.subHeader?(b.openBlock(),b.createBlock("div",v,[e.header?(b.openBlock(),b.createBlock("div",g,b.toDisplayString(e.header),1)):b.createCommentVNode("",!0),e.subHeader?(b.openBlock(),b.createBlock("div",S,b.toDisplayString(e.subHeader),1)):b.createCommentVNode("",!0)])):b.createCommentVNode("",!0)]}),_:2},1032,["src","height","class","style"])):b.createCommentVNode("",!0),r.showCover&&e.cover&&!e.cover.parallax&&e.cover.backgroundImage?(b.openBlock(),b.createBlock(i,{key:1,height:r.coverHeight,src:e.cover.backgroundImage,class:r.coverClasses,style:r.coverStyle,fit:"cover"},{default:b.withCtx(function(){return[e.header||e.subHeader?(b.openBlock(),b.createBlock("div",k,[b.createVNode("div",V,b.toDisplayString(e.header),1),b.createVNode("div",C,b.toDisplayString(e.subHeader),1)])):b.createCommentVNode("",!0)]}),_:2},1032,["height","src","class","style"])):b.createCommentVNode("",!0),r.showCover||!e.header&&!e.subHeader?b.createCommentVNode("",!0):(b.openBlock(),b.createBlock("div",x,[e.header?(b.openBlock(),b.createBlock("div",B,b.toDisplayString(e.header),1)):b.createCommentVNode("",!0),e.subHeader?(b.openBlock(),b.createBlock("div",w,b.toDisplayString(e.subHeader),1)):b.createCommentVNode("",!0)])),b.createVNode(d,{class:[r.formClasses,"q-py-sm"]},{default:b.withCtx(function(){return[(b.openBlock(),b.createBlock(b.resolveDynamicComponent(r.horizontal?"q-scroll-area":"div"),{class:{"q-pr-md":r.horizontal},style:{height:"100%"}},{default:b.withCtx(function(){return[(b.openBlock(!0),b.createBlock(b.Fragment,null,b.renderList(e.blocks,function(t,e){return b.openBlock(),b.createBlock(c,{key:t.name||t.type+e,"block-schema":t,modelValue:r.reactiveFormData[t.name],"onUpdate:modelValue":[function(e){return r.reactiveFormData[t.name]=e},function(e){return r.onUpdate(t.name,e)}]},{beforeblock:b.withCtx(function(e){var t=e.blockSchema,o=e.el,e=e.hover;return[b.renderSlot(r.$slots,"beforeblock",{blockSchema:t,el:o,hover:e})]}),_:2},1032,["block-schema","modelValue","onUpdate:modelValue"])}),128)),b.createVNode(u,{label:e.buttonLabel,unelevated:"",class:["shadow-"+r.reactiveFormSchema.theme.buttons.shadow+" q-px-"+["xs","sm","md","lg","xl"][r.reactiveFormSchema.theme.buttons.padding-1],"ty-submit-btn"],"no-caps":"",size:["sm","md","lg","xl"][r.reactiveFormSchema.theme.buttons.size-1],icon:e.buttonIcon,style:r.buttonStyle,onClick:r.buttonClicked},null,8,["label","class","size","icon","style","onClick"]),0<r.currentPage?(b.openBlock(),b.createBlock(u,{key:0,label:"Back",flat:"","no-caps":"",class:"q-ml-xl ty-back-btn",size:["sm","md","lg","xl"][r.reactiveFormSchema.theme.buttons.size-1],onClick:o[1]||(o[1]=function(e){return--r.currentPage})},null,8,["size"])):b.createCommentVNode("",!0)]}),_:2},1032,["class"]))]}),_:2},1032,["class"])]}),_:2},1032,["horizontal","class"]))]}),_:2},1032,["style","class"])]}),_:2},1032,["name","class"])}),128))]}),_:1},8,["modelValue"])]}),_:1},8,["action"]),b.renderSlot(r.$slots,"afterform")],512)],64)};var o=Object.freeze({__proto__:null,version:"0.1.46",TyFormViewer:t,install:function(e){e.component(t.name,t)}}),e={name:"TyInput",components:{},props:{type:{type:String,required:!0,validator:function(e){return["text","password","textarea","email","search","tel","number","url","time","date"].includes(e)}},name:{type:String,required:!0},label:String,hint:String,placeholder:String,behavior:{type:Object,default:function(){return{}}},modelValue:String},emits:["update:modelValue"],setup:function(e,t){var o=t.emit,r=b.inject("formSchema"),n=b.ref(e.modelValue),l=b.computed(function(){return{fontSize:(100+r.theme.inputs.labelSize)/100+"em"}}),t=b.computed(function(){return e.type+"_"+e.name});return{formSchema:r,labelStyle:l,id:t,modelValueRef:n,onUpdate:function(e){o("update:modelValue",e)}}}};e.render=function(e,t,o,r,n,l){var a=b.resolveComponent("q-input");return b.openBlock(),b.createBlock("div",null,["top"===r.formSchema.theme.inputs.labelStyle?(b.openBlock(),b.createBlock("label",{key:0,for:r.id,style:r.labelStyle,class:"ty-label ty-label-top"},b.toDisplayString(o.label),13,["for"])):b.createCommentVNode("",!0),b.createVNode(a,{label:"top"!==r.formSchema.theme.inputs.labelStyle?o.label:void 0,outlined:"full"===r.formSchema.theme.inputs.style,borderless:r.formSchema.theme.inputs.borderless,"stack-label":"stacked"===r.formSchema.theme.inputs.labelStyle,dense:r.formSchema.theme.inputs.dense,clearable:o.behavior.clearable,hint:o.hint,counter:o.behavior.counter,placeholder:o.placeholder,for:r.id,name:o.name,readonly:o.behavior.readOnly,disable:o.behavior.disabled,type:o.type,modelValue:r.modelValueRef,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return r.modelValueRef=e}),r.onUpdate],class:"ty-input"},null,8,["label","outlined","borderless","stack-label","dense","clearable","hint","counter","placeholder","for","name","readonly","disable","type","modelValue","onUpdate:modelValue"])])};var r=Object.freeze({__proto__:null,default:e}),e={name:"TySelect",components:{},props:{type:{type:String},name:{type:String,required:!0},label:String,hint:String,placeholder:String,behavior:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},modelValue:[Array,String]},emits:["update:modelValue"],setup:function(e,t){var o=t.emit,r=b.inject("formSchema"),n=b.ref(e.modelValue),l=b.computed(function(){return e.type+"_"+e.name}),t=b.computed(function(){return{fontSize:(100+r.theme.inputs.labelSize)/100+"em"}});return{formSchema:r,labelStyle:t,id:l,modelValueRef:n,onUpdate:function(e){o("update:modelValue",e)}}}};e.render=function(e,t,o,r,n,l){var a=b.resolveComponent("q-select");return b.openBlock(),b.createBlock("div",null,["top"===r.formSchema.theme.inputs.labelStyle?(b.openBlock(),b.createBlock("label",{key:0,for:r.id,style:r.labelStyle,class:"ty-label ty-label-top"},b.toDisplayString(o.label),13,["for"])):b.createCommentVNode("",!0),b.createVNode(a,{label:"top"!==r.formSchema.theme.inputs.labelStyle?o.label:void 0,outlined:"full"===r.formSchema.theme.inputs.style,borderless:r.formSchema.theme.inputs.borderless,"stack-label":"stacked"===r.formSchema.theme.inputs.labelStyle,dense:r.formSchema.theme.inputs.dense,clearable:o.behavior.clearable,hint:o.hint,counter:o.behavior.counter,placeholder:o.placeholder,for:r.id,readonly:o.behavior.readOnly,disable:o.behavior.disabled,modelValue:r.modelValueRef,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return r.modelValueRef=e}),r.onUpdate],options:o.options,multiple:o.behavior.multiple,"use-chips":o.behavior.multiple,name:o.name,class:"ty-select"},null,8,["label","outlined","borderless","stack-label","dense","clearable","hint","counter","placeholder","for","readonly","disable","modelValue","onUpdate:modelValue","options","multiple","use-chips","name"])])};var n=Object.freeze({__proto__:null,default:e}),e={name:"TySlider",components:{},props:{type:{type:String,required:!0},name:{type:String,required:!0},label:String,hint:String,behavior:{type:Object,default:function(){return{}}},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},defaultValue:{type:[Number,Object]},reverse:Boolean,showThumbLabel:{type:String,default:"always",validator:function(e){return["always","off","onSlide"].includes(e)}},thumbLabelPrefix:{type:String,default:""},thumbLabelSuffix:{type:String,default:""},snap:Boolean,markers:Boolean,range:Boolean,modelValue:[Number,Object]},setup:function(e,t){var o=t.emit,r=b.inject("formSchema"),n=b.ref(e.modelValue);null===n.value&&(n.value=void 0!==e.defaultValue?e.defaultValue:e.range?{min:e.min,max:e.max}:50);var l=b.computed(function(){return{fontSize:(100+r.theme.inputs.labelSize)/100+"em"}}),t=b.computed(function(){return e.type+"_"+e.name});return{formSchema:r,labelStyle:l,id:t,modelValueRef:n,onUpdate:function(e){o("update:modelValue",e)}}}},a={key:0,class:"text-caption q-ml-sm text-grey-8"};e.render=function(e,t,o,r,n,l){return b.openBlock(),b.createBlock("div",null,[b.createVNode("label",{style:r.labelStyle,class:"ty-label ty-label-top"},b.toDisplayString(o.label),5),(b.openBlock(),b.createBlock(b.resolveDynamicComponent(o.range?"q-range":"q-slider"),{name:o.name,readonly:o.behavior.readOnly,disable:o.behavior.disabled,min:o.min,max:o.max,step:o.step,reverse:o.reverse,label:"off"!==o.showThumbLabel,"label-always":"always"===o.showThumbLabel,"label-value":o.thumbLabelPrefix+r.modelValueRef+o.thumbLabelSuffix,"left-label-value":o.thumbLabelPrefix+r.modelValueRef.min+o.thumbLabelSuffix,"right-label-value":o.thumbLabelPrefix+r.modelValueRef.max+o.thumbLabelSuffix,snap:o.snap,markers:o.markers,class:"q-mt-lg",modelValue:r.modelValueRef,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return r.modelValueRef=e}),r.onUpdate]},null,8,["name","readonly","disable","min","max","step","reverse","label","label-always","label-value","left-label-value","right-label-value","snap","markers","modelValue","onUpdate:modelValue"])),o.hint?(b.openBlock(),b.createBlock("div",a,b.toDisplayString(o.hint),1)):b.createCommentVNode("",!0)])};var l=Object.freeze({__proto__:null,default:e}),e={name:"TyOptionGroup",components:{},props:{type:{type:String,required:!0,validator:function(e){return["radio","checkbox","toggle"].includes(e)}},name:{type:String,required:!0},label:String,labelSide:{type:String,default:"right",validator:function(e){return["left","right"].includes(e)}},inline:Boolean,options:{type:Array,default:function(){return[]}},hint:String,behavior:{type:Object,default:function(){return{}}},modelValue:[String,Array]},emits:["update:modelValue"],setup:function(e,t){var o=t.emit,r=b.inject("formSchema"),t=b.ref(e.modelValue);null===t.value&&"radio"!==e.type&&(t.value=[]);e=b.computed(function(){return{fontSize:(100+r.theme.inputs.labelSize)/100+"em"}});return{formSchema:r,labelStyle:e,modelValueRef:t,onUpdate:function(e){o("update:modelValue",e)}}}},i={key:0,class:"text-caption q-ml-sm text-grey-8"};e.render=function(e,t,o,r,n,l){var a=b.resolveComponent("q-option-group");return b.openBlock(),b.createBlock("div",null,[b.createVNode("label",{style:r.labelStyle,class:"ty-label ty-label-top"},b.toDisplayString(o.label),5),b.createVNode(a,{name:o.name,type:o.type,readonly:o.behavior.readOnly,disable:o.behavior.disabled,"left-label":"left"===o.labelSide,inline:o.inline,modelValue:r.modelValueRef,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return r.modelValueRef=e}),r.onUpdate],options:o.options},null,8,["name","type","readonly","disable","left-label","inline","modelValue","onUpdate:modelValue","options"]),o.hint?(b.openBlock(),b.createBlock("div",i,b.toDisplayString(o.hint),1)):b.createCommentVNode("",!0)])};var c=Object.freeze({__proto__:null,default:e}),e={name:"TyHtml",components:{},props:{type:{type:String,required:!0},name:{type:String,required:!0},html:String,behavior:{type:Object,default:function(){return{}}}},setup:function(e){var t=b.inject("formSchema"),o=b.ref(e.html);return{formSchema:t,id:b.computed(function(){return e.type+"_"+e.name}),refHtml:o}}};e.render=function(e,t,o,r,n,l){return b.openBlock(),b.createBlock("div",{innerHTML:r.refHtml},null,8,["innerHTML"])};var u=Object.freeze({__proto__:null,default:e});return o});